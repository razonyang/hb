{{- $dest := .Destination -}}
{{- if hasPrefix $dest "#" -}}
  {{- $dest = printf "%s%s" .Page.RelPermalink $dest -}}
{{- end -}}
{{- $target := $dest | safeURL -}}
{{- $external := partial "base/functions/is-url-external" $target -}}
<a
  href="{{ $target }}"
  {{ with .Title }}title="{{ . }}"{{ end }}
  {{ if $external }}target="_blank" rel="noopener noreferrer"{{ end }}>
  {{- .Text | safeHTML -}}
</a>